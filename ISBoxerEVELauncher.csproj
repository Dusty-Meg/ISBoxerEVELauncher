<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <OutputType>WinExe</OutputType>
    <TargetFramework>net9.0-windows</TargetFramework>
    <UseWPF>true</UseWPF>
    <UseWindowsForms>true</UseWindowsForms>
    <RootNamespace>ISBoxerEVELauncher</RootNamespace>
    <AssemblyName>ISBoxerEVELauncher</AssemblyName>
    <ApplicationIcon>ISBEL.ico</ApplicationIcon>
    <ApplicationManifest>Properties\app.manifest</ApplicationManifest>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    <LangVersion>latest</LangVersion>
    <Nullable>disable</Nullable>
    <TrimMode>partial</TrimMode>
    <PublishTrimmed>false</PublishTrimmed>
    <EnableWindowsTargeting>true</EnableWindowsTargeting>
    
    <!-- Suppress obsolete API warnings for gradual migration -->
    <WarningsAsErrors />
    <WarningsNotAsErrors>SYSLIB0011;SYSLIB0021;SYSLIB0022;SYSLIB0014;SYSLIB0043;SYSLIB0004;SYSLIB0003</WarningsNotAsErrors>
    
    <!-- Disable auto-generated assembly attributes to avoid conflicts with AssemblyInfo.cs -->
    <GenerateAssemblyInfo>false</GenerateAssemblyInfo>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|AnyCPU'">
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <Prefer32Bit>false</Prefer32Bit>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|AnyCPU'">
    <DefineConstants>TRACE</DefineConstants>
    <Prefer32Bit>true</Prefer32Bit>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|x64'">
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <PlatformTarget>x64</PlatformTarget>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|x64'">
    <DefineConstants>TRACE</DefineConstants>
    <PlatformTarget>x64</PlatformTarget>
    <Prefer32Bit>true</Prefer32Bit>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|x86'">
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <PlatformTarget>x86</PlatformTarget>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|x86'">
    <DefineConstants>TRACE</DefineConstants>
    <PlatformTarget>x86</PlatformTarget>
    <Prefer32Bit>true</Prefer32Bit>
  </PropertyGroup>

  <!-- Publishing and Manifest Properties - Disabled for .NET 9 compatibility -->
  <!--
  <PropertyGroup>
    <GenerateManifests>true</GenerateManifests>
    <SignManifests>true</SignManifests>
    <ManifestCertificateThumbprint>0F9F1EC85CB2E92335B115515DF48FB1D314A90C</ManifestCertificateThumbprint>
    <ManifestKeyFile>ISBoxerEVELauncher_TemporaryKey.pfx</ManifestKeyFile>
    <TargetZone>LocalIntranet</TargetZone>
  </PropertyGroup>
  -->

  <!-- Package References -->
  <ItemGroup>
    <PackageReference Include="Costura.Fody" Version="6.0.0">
      <PrivateAssets>all</PrivateAssets>
    </PackageReference>
    <PackageReference Include="Fody" Version="6.9.1">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
    <PackageReference Include="HtmlAgilityPack" Version="1.11.72" />
    <PackageReference Include="Microsoft.IdentityModel.Tokens" Version="8.6.0" />
    <PackageReference Include="Newtonsoft.Json" Version="13.0.3" />
    <PackageReference Include="Otp.NET" Version="1.4.0" />
  </ItemGroup>

  <!-- Resources and Content -->
  <ItemGroup>
    <Resource Include="ISBEL.ico" />
    <Resource Include="FodyWeavers.xml" />
    <Resource Include="ChangeHistory.txt" />
    <Resource Include="ILLink\ILLink.Descriptors.LibraryBuild.xml" />
  </ItemGroup>

  <!-- Additional Files -->
  <ItemGroup>
    <None Include="app.release.manifest" />
    <None Include="app.debug.manifest" />
    <None Include="FodyWeavers.xsd" />
    <None Include="ISBoxerEVELauncher_TemporaryKey.pfx" />
    <None Include="README.md" />
  </ItemGroup>

  <!-- Build Events -->
  <Target Name="PreBuild" BeforeTargets="PreBuildEvent">
    <Exec Command="del &quot;$(ProjectDir)app.manifest&quot;&#xD;&#xA;&#xD;&#xA;if &quot;$(Configuration)&quot;==&quot;Debug&quot; (&#xD;&#xA;  copy &quot;$(ProjectDir)app.debug.manifest&quot; &quot;$(ProjectDir)app.manifest&quot;&#xD;&#xA;) else (&#xD;&#xA;  copy &quot;$(ProjectDir)app.release.manifest&quot; &quot;$(ProjectDir)app.manifest&quot;&#xD;&#xA;)" />
  </Target>

</Project>